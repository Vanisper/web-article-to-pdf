# 网络文章导出pdf（油猴脚本）

> 本项目旧版代码在本项目的`/old`文件夹下

> 本项目于`1.3.1`版本开始采用工程化的模式开发

> 油猴脚本工程化由[vite-plugin-monkey](https://github.com/lisonge/vite-plugin-monkey)插件支持

## 简介

将一些主流的网站的文章，去除掉一些无关部分直接启动浏览器自带打印功能

仅适配A4页面大小,其他页面大小无法保证排版完整、美观

打印页面内容出现未加载的dom,说明该处没有加载完成,可多试几次

---

其实当网页加载的时候自己可以直接 Ctrl+P 触发打印

之所以点击脚本设置的按钮时，会有一个从头到尾的滚动过程，是为了给一些dom元素加载的时间（例如比较大的图片、知乎的公式渲染等等，这些不能马上渲染的内容需要一点点时间）

所以你在安装了此脚本之后，出现了“导出pdf”的按钮时，你可以不用点击（因为页面可能很长很长，还有些页面是有懒加载的推荐文章的，例如掘金），可以直接 Ctrl+P 触发打印。

当然，发现有些图片或者dom没在打印预览页面显示的时候，你可以手动滚动页面到那一块，确保他加载好了，这个时候再 Ctrl+P 触发打印，应该就没问题了。

## 原理

本插件使用浏览器自带的导出pdf的功能，配合CSS样式中[关于打印机的媒体查询](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media)，将文章主体导出成pdf。

其中媒体查询可以在触发print的时候，将页面中的指定dom隐藏(当然不只能做到这样)，只保留关键部分。

## 模式

脚本使用的是“规则配置”的形式，只需要提供：打印时需要忽略的css选择器、需要匹配的url正则、更多附加的特殊css样式。

详见项目`/config`目录下已有的规则。